{% extends "base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block content %}
    {% if not user_can_continue %}
        <div class="col-sm-6">
            <p class="lead">Continue as Guest</p>
            <form method="POST" action="">
                {% csrf_token %}
                {{ form | crispy }}
                <input type="submit" class="btn btn-success" value="Continue as Guest"/>
            </form>
        </div>
        <div class="col-sm-6">
            <p class="lead">Login to Continue</p>
            <form method="POST" action="{% url 'auth_login' %}">
                {% csrf_token %}
                {{ login_form | crispy }}
                <input type="hidden" name="next" value="{{ next_url }}">
                <input type="submit" class="btn btn-success" value="Login"/>
                <p>
                <p>{% trans "Forgot password" %}? <a href="{% url 'auth_password_reset' %}">{% trans "Reset it" %}</a>!
                </p>
                <p>{% trans "Not member" %}? <a href="{% url 'registration_register' %}">{% trans "Register" %}</a>!</p>
                </p>
            </form>
        </div>
    {% else %}
        <div class="col-sm-4 col-sm-offset-4 text-center">
            <p class="lead">
                Order Summary
            </p>
            <table class="table">

                <tr>
                    <td>
                        {{ order.cart.cartitem_set.count }} Item(s):<br/>
                        <ul class="list-unstyled">
                            {% for item in order.cart.cartitem_set.all %}
                                <li><b>{{ item.item.get_title }}</b></li>
                            {% endfor %}
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Tax: {{ order.cart.tax_total }}</td>
                </tr>
                <tr>
                    <td>Items Total: {{ order.cart.total }}</td>
                </tr>
                <tr>
                    <td>Total Shipping: {{ order.shipping_total_price }}</td>
                </tr>
                <tr>
                    <td>Order Total: {{ order.order_total }}</td>
                </tr>
            </table>
        </div>
        <div class="col-sm-4 col-sm-offset-4 text-center">
            <p>
                <b>Billing to</b>
                <br/>
                {{ order.billing_address.get_address }}
            </p>
            <p>
                <b>Shipping to</b>
                <br/>
                {{ order.shipping_address.get_address }}
            </p>
            <br/>
            <p>
                <b>Complete Order</b>
            </p>
        </div>
    {% endif %}
{% endblock %}